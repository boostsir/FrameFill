# 圖片背景添加工具 MVP - 產品規格文件

## 1. MVP 核心理念

### 1.1 MVP 目標

在最短時間內驗證核心功能 - **為圖片添加背景並調整尺寸**，專注於最基本但完整的用戶流程。

### 1.2 MVP 原則

- **最小化功能**：只保留絕對必要的功能
- **單一文件**：所有代碼在一個 HTML 文件中
- **零配置**：打開即用，無需安裝或設置
- **核心體驗完整**：雖精簡但可完成完整任務

## 2. MVP 功能範圍

### 2.1 保留功能 ✅

1. 上傳單張圖片（僅點擊上傳）
2. 設定輸出尺寸（寬度和高度輸入）
3. 調整圖片縮放（25% - 200%）
4. 選擇背景顏色（純色）
5. 實時預覽
6. 下載結果（PNG 格式）

### 2.2 移除功能 ❌

- ~~拖放上傳~~
- ~~貼上上傳~~
- ~~漸層背景~~
- ~~預設尺寸快速選擇~~
- ~~智能顏色推薦~~
- ~~多種導出格式~~
- ~~響應式設計優化~~
- ~~錯誤提示模態框~~

## 3. 技術簡化

### 3.1 技術棧

```
- HTML5 (結構)
- UIKit 3.x (透過 CDN)
- 原生 JavaScript ES6 (內嵌)
- Canvas API
```

### 3.2 文件結構

```
index.html (單一文件包含所有內容)
```

## 4. MVP 詳細規格

### 4.1 用戶界面佈局

```
┌────────────────────────────────────────┐
│      Image Background Tool (標題)       │
├────────────────────────────────────────┤
│                                        │
│  ┌─────────────────────────────────┐  │
│  │                                 │  │
│  │         Preview Canvas          │  │
│  │         (預覽區域)               │  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│                                        │
│  ┌─────────────────────────────────┐  │
│  │  [選擇圖片] 按鈕                  │  │
│  └─────────────────────────────────┘  │
│                                        │
│  輸出尺寸:                             │
│  寬度: [____] px  高度: [____] px     │
│                                        │
│  圖片縮放: [滑塊 25% --- 100% --- 200%] │
│  當前: 100%                           │
│                                        │
│  背景顏色: [#ffffff] [顏色選擇器]      │
│                                        │
│  ┌─────────────────────────────────┐  │
│  │       [下載圖片] 按鈕             │  │
│  └─────────────────────────────────┘  │
└────────────────────────────────────────┘
```

### 4.2 功能實現細節

#### 4.2.1 圖片上傳

```javascript
實現要點:
- 使用 <input type="file" accept="image/*">
- 文件選擇後立即讀取並顯示
- 使用 FileReader API
- 限制: 最大 5MB

驗證:
- 檢查文件類型 (image/*)
- 檢查文件大小 (<= 5MB)
- 失敗時使用 alert() 提示
```

#### 4.2.2 尺寸控制

```javascript
輸出尺寸:
- 兩個 number input
- 範圍: 100-2000px
- 預設值: 800x600
- 即時更新預覽

圖片縮放:
- range slider
- 範圍: 25-200
- 步進: 5
- 預設值: 100
- 顯示當前百分比
```

#### 4.2.3 背景設定

```javascript
背景顏色:
- 使用 <input type="color">
- 預設值: #ffffff
- 即時更新預覽
```

#### 4.2.4 Canvas 處理

```javascript
核心邏輯:
1. 創建 canvas (設定為輸出尺寸)
2. 填充背景色
3. 計算縮放後的圖片尺寸
   scaledWidth = originalWidth * (scale/100)
   scaledHeight = originalHeight * (scale/100)
4. 計算居中位置
   x = (canvasWidth - scaledWidth) / 2
   y = (canvasHeight - scaledHeight) / 2
5. 繪製圖片
   ctx.drawImage(img, x, y, scaledWidth, scaledHeight)
```

#### 4.2.5 下載功能

```javascript
實現:
- canvas.toBlob() 轉換為 PNG
- 創建下載連結
- 文件名: image-with-bg-{timestamp}.png
```

### 4.3 代碼結構 (單文件)

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Image Background Tool</title>
    <!-- UIKit CSS -->
    <link rel="stylesheet" href="UIKit CDN" />
    <style>
      /* 最小必要的自定義樣式 */
    </style>
  </head>
  <body>
    <div class="uk-container">
      <!-- UI 結構 -->
    </div>

    <!-- UIKit JS -->
    <script src="UIKit CDN"></script>

    <script>
      // 全局變量
      let uploadedImage = null;
      let imageElement = null;

      // 初始化函數
      function init() {
        // 綁定事件
      }

      // 處理圖片上傳
      function handleImageUpload(event) {
        // FileReader 讀取圖片
        // 創建 Image 對象
        // 更新預覽
      }

      // 更新預覽
      function updatePreview() {
        // 獲取所有參數
        // 清空 canvas
        // 繪製背景
        // 繪製圖片
      }

      // 下載圖片
      function downloadImage() {
        // canvas.toBlob()
        // 創建下載
      }

      // 頁面載入完成後初始化
      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
```

## 5. MVP 開發檢查清單

### 5.1 核心功能檢查

- [ ] 圖片可以成功上傳
- [ ] 預覽 canvas 正確顯示
- [ ] 寬度輸入有效 (100-2000px)
- [ ] 高度輸入有效 (100-2000px)
- [ ] 縮放滑塊工作正常 (25%-200%)
- [ ] 背景顏色選擇器工作
- [ ] 圖片始終居中
- [ ] 下載功能正常

### 5.2 基本驗證檢查

- [ ] 非圖片文件被拒絕
- [ ] 大於 5MB 文件被拒絕
- [ ] 無圖片時下載按鈕禁用
- [ ] 尺寸輸入只接受有效數字

### 5.3 用戶體驗檢查

- [ ] 介面簡潔清晰
- [ ] 操作流程直觀
- [ ] 更改立即反映在預覽
- [ ] 下載的圖片質量良好

## 6. MVP 實現步驟

### 第一步：基礎結構 (30 分鐘)

1. 創建 HTML 文件
2. 引入 UIKit CDN
3. 建立基本 UI 結構
4. 添加 Canvas 元素

### 第二步：圖片上傳 (30 分鐘)

1. 實現文件選擇
2. FileReader 讀取
3. 顯示在 Canvas

### 第三步：控制功能 (45 分鐘)

1. 實現尺寸輸入
2. 實現縮放滑塊
3. 實現顏色選擇
4. 連接到更新函數

### 第四步：Canvas 繪製 (45 分鐘)

1. 實現背景繪製
2. 實現圖片縮放計算
3. 實現居中定位
4. 完成繪製邏輯

### 第五步：下載功能 (30 分鐘)

1. 實現 Canvas 轉 Blob
2. 創建下載連結
3. 測試下載功能

### 第六步：優化和測試 (30 分鐘)

1. 添加基本驗證
2. 優化用戶體驗
3. 測試各種圖片
4. 修復發現的問題

**總計：約 3.5 小時完成 MVP**

## 7. MVP 成功標準

### 7.1 功能標準

- 用戶能夠上傳圖片 ✓
- 用戶能夠設定輸出尺寸 ✓
- 用戶能夠調整圖片大小 ✓
- 用戶能夠選擇背景顏色 ✓
- 用戶能夠下載結果 ✓

### 7.2 技術標準

- 單一 HTML 文件 ✓
- 無需後端服務 ✓
- 檔案小於 50KB ✓
- 載入時間 < 2 秒 ✓

### 7.3 用戶體驗標準

- 5 次點擊內完成任務 ✓
- 無需說明即可使用 ✓
- 預覽即時更新 ✓

## 8. MVP 後續迭代

### V1.1 (第二週)

- 添加拖放上傳
- 添加預設尺寸按鈕
- 改善錯誤提示

### V1.2 (第三週)

- 添加簡單漸層背景
- 添加 JPEG 導出選項
- 響應式設計優化

### V1.3 (第四週)

- 智能顏色推薦
- 批次處理
- 歷史記錄

---

## 實施建議

這個 MVP 版本可以在 **3-4 小時內完成**，建議按以下順序請 AI 協助開發：

1. **首先**：請 AI 根據此 MVP 規格生成完整的單文件 HTML
2. **測試**：上傳不同尺寸的圖片測試基本功能
3. **調整**：根據測試結果微調參數
4. **部署**：直接上傳到 GitHub Pages 或任何靜態託管服務

這個 MVP 版本雖然精簡，但已包含所有核心功能，可以立即為用戶提供價值，並收集反饋 for 後續改進。
